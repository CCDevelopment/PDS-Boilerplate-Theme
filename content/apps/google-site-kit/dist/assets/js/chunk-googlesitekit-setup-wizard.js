(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{144:function(e,t,a){"use strict";var i=a(3),n=a.n(i),r=a(4),s=a.n(r),o=a(5),c=a.n(o),l=a(6),u=a.n(l),d=a(11),m=a.n(d),g=a(7),p=a.n(g),h=a(1),_=a(23),f=a(8),k=a.n(f),v=function(e){function t(e){var a;return n()(this,t),(a=c()(this,u()(t).call(this,e))).formFieldRef=Object(h.createRef)(),a.checkboxRef=Object(h.createRef)(),a}return p()(t,e),s()(t,[{key:"componentDidMount",value:function(){new _.e(this.formFieldRef.current).input=new _.c(this.checkboxRef.current)}},{key:"render",value:function(){var e=this.props,t=e.onChange,a=e.id,i=e.name,n=e.value,r=e.checked,s=e.disabled,o=e.children;return React.createElement("div",{className:"mdc-form-field",ref:this.formFieldRef},React.createElement("div",{className:"\n\t\t\t\t\t\tmdc-checkbox\n\t\t\t\t\t\t".concat(s?"mdc-checkbox--disabled":"","\n\t\t\t\t\t"),ref:this.checkboxRef},React.createElement("input",{className:"mdc-checkbox__native-control",type:"checkbox",id:a,name:i,value:n,checked:r,disabled:s,onChange:t}),React.createElement("div",{className:"mdc-checkbox__background"},React.createElement("svg",{className:"mdc-checkbox__checkmark",viewBox:"0 0 24 24"},React.createElement("path",{className:"mdc-checkbox__checkmark-path",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"})),React.createElement("div",{className:"mdc-checkbox__mixedmark"}))),React.createElement("label",{htmlFor:a},o))}}]),t}(h.Component);v.propTypes={onChange:k.a.func.isRequired,id:k.a.string.isRequired,name:k.a.string.isRequired,value:k.a.string.isRequired,checked:k.a.bool,disabled:k.a.bool,children:k.a.node.isRequired},v.defaultProps={checked:!1,disabled:!1};var R=v,y=a(36),b=a.n(y),E=a(0),C=function(e){function t(e){var a;return n()(this,t),(a=c()(this,u()(t).call(this,e))).state={scriptOnPage:!!googlesitekit.admin.trackingOptin,optIn:!!googlesitekit.admin.trackingOptin,error:!1},a.handleOptIn=a.handleOptIn.bind(m()(a)),a}return p()(t,e),s()(t,[{key:"handleOptIn",value:function(e){var t=this,a=e.target.checked,i={googlesitekit_tracking_optin:a};b()({path:"/wp/v2/settings",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(i),method:"POST"}).then((function(){if(a&&!t.state.scriptOnPage){var e=window.document;if(!e)return;window.googlesitekitTrackingEnabled=!!a,e.body.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t<script async src="https://www.googletagmanager.com/gtag/js?id='.concat(googlesitekit.admin.trackingID,'"><\/script>\n\t\t\t\t\t')),e.body.insertAdjacentHTML("beforeend","\n\t\t\t\t\t\t<script>\n\t\t\t\t\t\t\twindow.dataLayer = window.dataLayer || [];\n\t\t\t\t\t\t\tfunction gtag(){dataLayer.push(arguments);}\n\t\t\t\t\t\t\tgtag('js', new Date());\n\t\t\t\t\t\t\tgtag('config', '".concat(googlesitekit.admin.trackingID,"');\n\t\t\t\t\t\t<\/script>\n\t\t\t\t\t"))}t.setState({optIn:!!a,error:!1,scriptOnPage:!0})})).catch((function(a){t.setState({optIn:!e.target.checked,error:{errorCode:a.code,errorMsg:a.message}})}))}},{key:"render",value:function(){var e=this.state,t=e.optIn,a=e.error,i=this.props,n=i.id,r=i.name;return React.createElement("div",{className:"googlesitekit-opt-in"},React.createElement(R,{id:n,name:r,value:"1",checked:t,onChange:this.handleOptIn},Object(E.__)("Help us improve the Site Kit plugin by allowing tracking of anonymous usage stats. All data are treated in accordance with ","google-site-kit"),React.createElement("a",{href:"https://policies.google.com/privacy",target:"_blank",rel:"noopener noreferrer"},Object(E.__)("Google Privacy Policy","google-site-kit")),"."),a&&React.createElement("div",{className:"googlesitekit-error-text"},a.errorMsg))}}]),t}(h.Component);C.propTypes={id:k.a.string,name:k.a.string},C.defaultProps={id:"googlesitekit-opt-in",name:"optIn"};t.a=C},18:function(e,t,a){"use strict";var i=a(3),n=a.n(i),r=a(4),s=a.n(r),o=a(5),c=a.n(o),l=a(6),u=a.n(l),d=a(7),m=a.n(d),g=a(1),p=a(8),h=a.n(p),_=a(14),f=function(e){function t(){return n()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.ctaLabel,i=e.ctaLink;return React.createElement("header",{className:"googlesitekit-layout__header"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},t&&React.createElement("div",{className:"\n\t\t\t\t\t\t\t\t\tmdc-layout-grid__cell\n\t\t\t\t\t\t\t\t\t".concat(i?"mdc-layout-grid__cell--span-6-desktop":"mdc-layout-grid__cell--span-12-desktop","\n\t\t\t\t\t\t\t\t\tmdc-layout-grid__cell--align-middle\n\t\t\t\t\t\t\t\t\t").concat(i?"":"mdc-layout-grid__cell--span-8-tablet","\n\t\t\t\t\t\t\t\t\tmdc-layout-grid__cell--span-4-phone\n\t\t\t\t\t\t\t\t")},React.createElement("h3",{className:"googlesitekit-subheading-1 googlesitekit-layout__header-title"},t)),i&&React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-4-phone mdc-layout-grid__cell--align-middle mdc-layout-grid__cell--align-right-tablet "},React.createElement(_.a,{href:i,external:!0,inherit:!0},a)))))}}]),t}(g.Component);f.propTypes={title:h.a.string,ctaLabel:h.a.string,ctaLink:h.a.string},f.defaultProps={title:"",ctaLabel:"",ctaLink:""};var k=f,v=a(61),R=function(e){function t(){return n()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.ctaLabel,a=e.ctaLink,i=e.footerContent;return React.createElement("footer",{className:"googlesitekit-layout__footer"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:"mdc-layout-grid__cell mdc-layout-grid__cell--span-12"},a&&t&&React.createElement(v.a,{className:"googlesitekit-data-block__source",name:t,href:a,external:!0}),i))))}}]),t}(g.Component);R.propTypes={ctaLabel:h.a.string,ctaLink:h.a.string};var y=R,b=function(e){function t(){return n()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.header,a=e.footer,i=e.children,n=e.title,r=e.headerCtaLabel,s=e.headerCtaLink,o=e.footerCtaLabel,c=e.footerCtaLink,l=e.footerContent,u=e.className,d=e.fill,m=e.relative;return React.createElement("div",{className:"\n\t\t\t\tgooglesitekit-layout\n\t\t\t\t".concat(u&&u,"\n\t\t\t\t").concat(d?"googlesitekit-layout--fill":"","\n\t\t\t\t").concat(m?"googlesitekit-layout--relative":"","\n\t\t\t")},t&&React.createElement(k,{title:n,ctaLabel:r,ctaLink:s}),i,a&&React.createElement(y,{ctaLabel:o,ctaLink:c,footerContent:l}))}}]),t}(g.Component);b.propTypes={header:h.a.bool,footer:h.a.bool,children:h.a.node.isRequired,title:h.a.string,headerCtaLabel:h.a.string,headerCtaLink:h.a.string,footerCtaLabel:h.a.string,footerCtaLink:h.a.string,footerContent:h.a.node,className:h.a.string,fill:h.a.bool,relative:h.a.bool},b.defaultProps={header:!1,footer:!1,title:"",headerCtaLabel:"",headerCtaLink:"",footerCtaLabel:"",footerCtaLink:"",footerContent:null,className:"",fill:!1,relative:!1};t.a=b},202:function(e,t,a){"use strict";a.r(t);var i=a(13),n=a.n(i),r=a(15),s=a.n(r),o=a(3),c=a.n(o),l=a(4),u=a.n(l),d=a(5),m=a.n(d),g=a(6),p=a.n(g),h=a(11),_=a.n(h),f=a(7),k=a.n(f),v=a(1),R=a(12),y=a(0),b=a(44),E=a(29),C=a(18),S=a(9),w=a(2),N=a(8),O=a.n(N),L=a(14),j=a(144),x=a(43),M=function(e){function t(){return c()(this,t),m()(this,p()(t).apply(this,arguments))}return k()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.connectURL,a=e.needReauthenticate,i=e.resetAndRestart;return React.createElement("section",{className:"googlesitekit-wizard-step googlesitekit-wizard-step--two"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},React.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-wizard-step__title "},Object(y.__)("Authenticate with Google","google-site-kit")),React.createElement("p",null,Object(y.__)("Please sign into your Google account to begin.","google-site-kit")),a&&React.createElement("p",{className:"googlesitekit-error-text"},Object(y.__)("You did not grant access to one or more of the requested scopes. Please grant all scopes that you are prompted for.","google-site-kit")),React.createElement("p",null,React.createElement(E.a,{onClick:function(){Object(w.v)("plugin_setup","signin_with_google"),document.location=t}},Object(y.__)("Sign in with Google","google-site-kit")),i&&React.createElement(L.a,{className:"googlesitekit-wizard-step__back",onClick:i},Object(y.__)("Back","google-site-kit"))),React.createElement("div",{className:"googlesitekit-wizard-step__action googlesitekit-wizard-step__action--justify"},React.createElement(j.a,null),React.createElement(x.a,null))))))}}]),t}(v.Component);M.propTypes={connectURL:O.a.string.isRequired,resetAndRestart:O.a.func};var A=M,U=a(71),P=a.n(U),z=a(31),D=a(23),q=function(e){function t(e){var a;c()(this,t);var i=(a=m()(this,p()(t).call(this,e))).props,n=i.isAuthenticated,r=i.shouldSetup;return a.state={loading:n&&r,loadingMsg:Object(y.__)("Getting your verified sites...","google-site-kit"),siteURL:" ",selectedURL:"",errorCode:!1,errorMsg:""},a.onProceed=a.onProceed.bind(_()(a)),a}var a,i;return k()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isAuthenticated,a=e.shouldSetup;t&&a&&this.requestSitePropertyList()}},{key:"requestSitePropertyList",value:function(){var e=this,t=this.props.setErrorMessage;s()(n.a.mark((function a(){var i,r,s,o,c;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,S.c.get(S.b,"site-verification","verification");case 3:if(i=a.sent,r=i.verified,s=i.identifier,!r){a.next=16;break}return Object(w.v)("verification_setup","verification_check_true"),a.next=10,e.insertSiteVerification(s);case 10:if(!0!==a.sent.verified){a.next=14;break}return e.props.siteVerificationSetup(!0),a.abrupt("return",!0);case 14:a.next=17;break;case 16:Object(w.v)("verification_setup","verification_check_false");case 17:e.setState({loading:!1,siteURL:s}),a.next=26;break;case 20:a.prev=20,a.t0=a.catch(0),o=a.t0.message,Object(w.z)(a.t0.message)&&(c=JSON.parse(a.t0.message),o=c.error.message||a.t0.message),t(o),e.setState({loading:!1,errorCode:a.t0.code,errorMsg:o,siteURL:googlesitekit.admin.siteURL});case 26:case"end":return a.stop()}}),a,null,[[0,20]])})))()}},{key:"insertSiteVerification",value:(i=s()(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.c.set(S.b,"site-verification","verification",{siteURL:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"onProceed",value:(a=s()(n.a.mark((function e(){var t,a,i,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.setErrorMessage,a=this.state.siteURL?this.state.siteURL:googlesitekit.admin.siteURL,t(""),this.setState({loading:!0,loadingMsg:Object(y.__)("Verifying...","google-site-kit"),errorCode:!1,errorMsg:""}),e.prev=4,e.next=7,this.insertSiteVerification(a);case 7:!0===e.sent.verified&&(Object(w.v)("verification_setup","verification_insert_tag"),this.props.siteVerificationSetup(!0)),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(4),i=e.t0.message,Object(w.z)(e.t0.message)&&(r=JSON.parse(e.t0.message),i=r.error.message||e.t0.message),t(i),this.setState({loading:!1,errorCode:e.t0.code,errorMsg:i});case 17:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(){return a.apply(this,arguments)})},{key:"renderForm",value:function(){var e=this.state,t=e.loading,a=e.loadingMsg,i=e.siteURL,n=React.createElement(v.Fragment,null,a&&React.createElement("p",null,a),React.createElement(z.a,null));return t?n:React.createElement(v.Fragment,null,React.createElement("div",{className:"googlesitekit-wizard-step__inputs"},React.createElement(D.l,{label:Object(y.__)("Website Address","google-site-kit"),name:"siteProperty",floatingLabelClassName:"mdc-floating-label--float-above",outlined:!0,disabled:!0},React.createElement(D.b,{value:i}))),React.createElement("div",{className:"googlesitekit-wizard-step__action googlesitekit-wizard-step__action--justify"},React.createElement(E.a,{onClick:this.onProceed},Object(y.__)("Continue","google-site-kit")),React.createElement(x.a,null)))}},{key:"render",value:function(){var e=this.props,a=e.isAuthenticated,i=e.shouldSetup,n=this.state.errorMsg;return i?React.createElement(v.Fragment,null,React.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-wizard-step__title "},Object(y.__)("Verify URL","google-site-kit")),React.createElement("p",{className:"googlesitekit-wizard-step__text"},Object(y.__)("We will need to verify your URL for Site Kit.","google-site-kit")),n&&0<n.length&&React.createElement("p",{className:"googlesitekit-error-text"},n),a&&this.renderForm()):t.renderSetupDone()}}],[{key:"renderSetupDone",value:function(){return React.createElement(v.Fragment,null,React.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-wizard-step__title "},Object(y.__)("Verify URL","google-site-kit")),React.createElement("p",{className:"googlesitekit-wizard-step__text"},Object(y.__)("Congratulations, your site has been verified!","google-site-kit")))}}]),t}(v.Component);q.propTypes={isAuthenticated:O.a.bool.isRequired,shouldSetup:O.a.bool.isRequired,siteVerificationSetup:O.a.func.isRequired,completeSetup:O.a.func,setErrorMessage:O.a.func.isRequired};var F=q,T=function(e){function t(){return c()(this,t),m()(this,p()(t).apply(this,arguments))}return k()(t,e),u()(t,[{key:"render",value:function(){var e=!this.props.isVerified;return React.createElement("section",{className:"googlesitekit-wizard-step googlesitekit-wizard-step--three"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},React.createElement(F,P()({shouldSetup:e},this.props))))))}}]),t}(v.Component);T.propTypes={siteVerificationSetup:O.a.func.isRequired};var V=T,I=function(e){function t(e){var a;c()(this,t),a=m()(this,p()(t).call(this,e));var i=googlesitekit.admin.siteURL;return a.state={loading:!0,sites:!1,selectedURL:i,siteURL:i,connected:!1,errorCode:!1,errorMsg:""},a.handleURLSelect=a.handleURLSelect.bind(_()(a)),a.insertPropertyToSearchConsole=a.insertPropertyToSearchConsole.bind(_()(a)),a.submitPropertyEventHandler=a.submitPropertyEventHandler.bind(_()(a)),a}var a,i;return k()(t,e),u()(t,[{key:"componentDidMount",value:(i=s()(n.a.mark((function e(){var t,a,i,r,s,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.isAuthenticated,i=t.shouldSetup,a&&i){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,r=["siteRestrictedUser","siteOwner","siteFullUser"],e.next=7,S.c.get(S.b,"search-console","matched-sites");case 7:if(s=e.sent,!(o=s.exactMatch)||!r.includes(o.permissionLevel)){e.next=13;break}return e.next=12,S.c.set(S.b,"search-console","site",{siteURL:o.siteURL});case 12:return e.abrupt("return",this.props.searchConsoleSetup(o.siteURL));case 13:e.next=17;break;case 15:e.prev=15,e.t0=e.catch(3);case 17:this.requestSearchConsoleSiteList();case 18:case"end":return e.stop()}}),e,this,[[3,15]])}))),function(){return i.apply(this,arguments)})},{key:"requestSearchConsoleSiteList",value:function(){var e=this;if(!this.state.errorCode){var t=this.props.setErrorMessage;s()(n.a.mark((function a(){var i,r,s,o;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,S.c.get(S.b,"search-console","matched-sites");case 3:if(i=a.sent,r=i.exactMatch,s=i.propertyMatches,!r){a.next=11;break}return a.next=9,e.insertPropertyToSearchConsole(r.siteURL);case 9:return e.props.searchConsoleSetup(r.siteURL),a.abrupt("return");case 11:o="",o=1<s.length?Object(y.sprintf)(
/* translators: %d: the number of matching properties. %s: URL of recommended site. */
Object(y.__)("We found %d existing accounts. We recommend using the account “%s”. Please confirm or change below to use.","google-site-kit"),s.length,s[0].siteURL):Object(y.__)("We found no verified accounts, would you like to verify this URL?","google-site-kit"),t(o),e.setState({loading:!1,sites:s,errorCode:"no_property_matched",errorMsg:o}),a.next=21;break;case 17:a.prev=17,a.t0=a.catch(0),t(a.t0.message),e.setState({loading:!1,errorCode:a.t0.code,errorMsg:a.t0.message});case 21:case"end":return a.stop()}}),a,null,[[0,17]])})))()}}},{key:"insertPropertyToSearchConsole",value:(a=s()(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.c.set(S.b,"search-console","site",{siteURL:t});case 2:Object(w.v)("search_console_setup","add_new_sc_property"),this.setState({loading:!1,connected:!0});case 4:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"submitPropertyEventHandler",value:function(){var e=this,t=this.state.selectedURL,a=this.props.setErrorMessage;s()(n.a.mark((function i(){return n.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.insertPropertyToSearchConsole(t);case 3:a(""),e.props.searchConsoleSetup(t),i.next=11;break;case 7:i.prev=7,i.t0=i.catch(0),a(i.t0.message[0].message),e.setState({loading:!1,errorCode:i.t0.code,errorMsg:i.t0.message[0].message});case 11:case"end":return i.stop()}}),i,null,[[0,7]])})))()}},{key:"handleURLSelect",value:function(e,t){this.setState({selectedURL:t.getAttribute("data-value")})}},{key:"matchedForm",value:function(){var e=this.state,t=e.sites,a=e.selectedURL,i=[{label:"",value:"",disabled:!0}];return t?(t.forEach((function(e){i.push({label:e,value:e})})),React.createElement(v.Fragment,null,React.createElement("div",{className:"googlesitekit-setup-module__inputs"},React.createElement(D.k,{enhanced:!0,name:"siteProperty",label:Object(y.__)("Choose URL","google-site-kit"),outlined:!0,onEnhancedChange:this.handleURLSelect,options:i,value:a})),React.createElement("div",{className:"googlesitekit-setup-module__action googlesitekit-setup-module__action--justify"},React.createElement(E.a,{onClick:this.submitPropertyEventHandler},Object(y.__)("Continue","google-site-kit")),React.createElement(x.a,null)))):null}},{key:"noSiteForm",value:function(){var e=this.state.siteURL;return React.createElement(v.Fragment,null,React.createElement("div",{className:"googlesitekit-setup-module__inputs"},React.createElement(D.l,{label:Object(y.__)("Website Address","google-site-kit"),name:"siteProperty",floatingLabelClassName:"mdc-floating-label--float-above",outlined:!0,disabled:!0},React.createElement(D.b,{value:e}))),React.createElement("div",{className:"googlesitekit-setup-module__action googlesitekit-setup-module__action--justify"},React.createElement(E.a,{onClick:this.submitPropertyEventHandler},Object(y.__)("Continue","google-site-kit")),React.createElement(x.a,null)))}},{key:"renderForm",value:function(){var e=this.state,t=e.loading,a=e.sites;return t?React.createElement(v.Fragment,null,React.createElement("p",null,Object(y.__)("We’re locating your Search Console account.","google-site-kit")),React.createElement(z.a,null)):0===a.length?this.noSiteForm():this.matchedForm()}},{key:"render",value:function(){var e=this.props,a=e.isAuthenticated,i=e.shouldSetup,n=this.state,r=n.errorMsg,s=n.connected;return!i||s?t.connected():React.createElement("section",{className:"googlesitekit-setup-module googlesitekit-setup-module--search-console"},React.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-setup-module__title "},Object(y._x)("Search Console","Service name","google-site-kit")),r&&0<r.length&&React.createElement("p",{className:"googlesitekit-error-text"},r),a&&i&&this.renderForm())}}],[{key:"connected",value:function(){return React.createElement("section",{className:"googlesitekit-setup-module googlesitekit-setup-module--search-console"},React.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-setup-module__title "},Object(y._x)("Search Console","Service name","google-site-kit")),React.createElement("p",{className:"googlesitekit-setup-module__text--no-margin"},Object(y.__)("Your Search Console is set up with Site Kit.","google-site-kit")))}}]),t}(v.Component);I.propTypes={isAuthenticated:O.a.bool.isRequired,shouldSetup:O.a.bool.isRequired,searchConsoleSetup:O.a.func.isRequired,setErrorMessage:O.a.func.isRequired};var K=I,B=function(e){function t(){return c()(this,t),m()(this,p()(t).apply(this,arguments))}return k()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.isVerified,a=e.hasSearchConsoleProperty,i=t&&!a;return React.createElement("section",{className:"googlesitekit-wizard-step googlesitekit-wizard-step--four"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},i?React.createElement(K,P()({shouldSetup:i},this.props)):K.connected()))))}}]),t}(v.Component);B.propTypes={searchConsoleSetup:O.a.func.isRequired};var G=B,H=function(e){function t(e){var a;return c()(this,t),a=m()(this,p()(t).call(this,e)),googlesitekit.setup.hasSearchConsoleProperty?Object(w.v)("plugin_setup","user_verified"):Object(w.v)("plugin_setup","site_verified"),a}return k()(t,e),u()(t,[{key:"render",value:function(){return React.createElement("section",{className:"googlesitekit-wizard-step googlesitekit-wizard-step--five"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-4-phone mdc-layout-grid__cell--span-5-tablet mdc-layout-grid__cell--span-9-desktop "},React.createElement("h2",{className:" googlesitekit-heading-3 googlesitekit-wizard-step__title "},Object(y.__)("Congratulations!","google-site-kit")),React.createElement("p",null,Object(y.__)("You successfully completed the Site Kit setup and connected Search Console. Check the dashboard for more services to connect.","google-site-kit")),React.createElement("div",{className:"googlesitekit-wizard-step__action"},React.createElement(E.a,{id:"wizard-step-five-proceed",onClick:this.props.completeSetup},Object(y.__)("Go to Dashboard","google-site-kit")))),React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-4-phone mdc-layout-grid__cell--span-3-tablet mdc-layout-grid__cell--span-3-desktop "},React.createElement("div",{className:"googlesitekit-rocket"},React.createElement("img",{className:"googlesitekit-rocket__body",alt:"",src:googlesitekit.admin.assetsRoot+"images/rocket-body.png"}),React.createElement("img",{className:"googlesitekit-rocket__clouds",alt:"",src:googlesitekit.admin.assetsRoot+"images/rocket-clouds.png"}),React.createElement("img",{className:"googlesitekit-rocket__dust",alt:"",src:googlesitekit.admin.assetsRoot+"images/rocket-dust.png"}))))))}}]),t}(v.Component);H.propTypes={completeSetup:O.a.func.isRequired};var W=H,J={authentication:{title:Object(y.__)("Authenticate","google-site-kit"),required:!0,isApplicable:function(){return!0},isCompleted:function(e){return e.isSiteKitConnected&&e.isAuthenticated&&!e.needReauthenticate},Component:A},verification:{title:Object(y.__)("Verify URL","google-site-kit"),required:!0,isApplicable:function(){return!0},isCompleted:function(e){return e.isSiteKitConnected&&e.isAuthenticated&&e.isVerified},Component:V},seachConsoleProperty:{title:Object(y.__)("Connect Search Console","google-site-kit"),required:!0,isApplicable:function(){return!0},isCompleted:function(e){return e.isSiteKitConnected&&e.isAuthenticated&&e.isVerified&&e.hasSearchConsoleProperty},Component:G},completeSetup:{title:Object(y.__)("Finish","google-site-kit"),required:!1,isApplicable:function(){return!0},isCompleted:function(e){return e.isSiteKitConnected&&e.isAuthenticated&&e.isVerified&&e.hasSearchConsoleProperty},Component:W}},Y=a(21),Q=a(19),X=a.n(Q),Z=function(e){function t(){return c()(this,t),m()(this,p()(t).apply(this,arguments))}return k()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.currentStep,a=e.step,i=e.title,n=e.status,r=e.warning,s=e.error,o=e.stepKey,c=n;r?c="warning":s&&(c="error");var l=!1;switch(c){case"warning":case"error":l=X.a.createElement(Y.a,{id:"exclamation",height:"12",width:"2"});break;case"completed":l=X.a.createElement(Y.a,{id:"check",height:"12",width:"16"})}return X.a.createElement("div",{className:"\n\t\t\t\tgooglesitekit-wizard-progress-step\n\t\t\t\tgooglesitekit-wizard-progress-step--".concat(a,"\n\t\t\t\t").concat(t?"googlesitekit-wizard-progress-step--current":"","\n\t\t\t\tgooglesitekit-wizard-progress-step--").concat(o,"\n\t\t\t")},X.a.createElement("div",{className:"googlesitekit-wizard-progress-step__number-wrapper"},X.a.createElement("div",{className:"\n\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number\n\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number--".concat(c,"\n\t\t\t\t\t")},X.a.createElement("span",{className:"\n\t\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number-text\n\t\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number-text--".concat(c,"\n\t\t\t\t\t\t")},a),l&&X.a.createElement("span",{className:"\n\t\t\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number-icon\n\t\t\t\t\t\t\t\tgooglesitekit-wizard-progress-step__number-icon--".concat(c,"\n\t\t\t\t\t\t\t")},l))),X.a.createElement("p",{className:"googlesitekit-wizard-progress-step__text"},i))}}]),t}(v.Component);Z.propTypes={currentStep:O.a.bool.isRequired,step:O.a.number.isRequired,title:O.a.string,status:O.a.string,warning:O.a.bool,error:O.a.bool},Z.defaultProps={title:"",status:"",warning:!1,error:!1,removeFirstStep:!1};var $=Z,ee=function(e){function t(e){var a;c()(this,t),a=m()(this,p()(t).call(this,e));var i=googlesitekit.admin.connectURL,n=googlesitekit.setup,r=n.isAuthenticated,s=n.hasSearchConsoleProperty,o=n.isSiteKitConnected,l=n.isVerified,u=n.needReauthenticate,d=googlesitekit.permissions.canSetup;return a.state={canSetup:d,isAuthenticated:r,isVerified:l,needReauthenticate:u,hasSearchConsoleProperty:s,hasSearchConsolePropertyFromTheStart:s,connectURL:i,errorMsg:"",isSiteKitConnected:o,completeSetup:!1},a.siteConnectedSetup=a.siteConnectedSetup.bind(_()(a)),a.siteVerificationSetup=a.siteVerificationSetup.bind(_()(a)),a.searchConsoleSetup=a.searchConsoleSetup.bind(_()(a)),a.resetAndRestart=a.resetAndRestart.bind(_()(a)),a.completeSetup=a.completeSetup.bind(_()(a)),a.setErrorMessage=a.setErrorMessage.bind(_()(a)),a}var a;return k()(t,e),u()(t,[{key:"resetAndRestart",value:(a=s()(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.c.set(S.a,"site","reset");case 2:Object(w.d)(),this.setState({isSiteKitConnected:!1,isAuthenticated:!1,isVerified:!1,hasSearchConsoleProperty:!1,completeSetup:!1,errorMsg:""});case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"completeSetup",value:function(){this.setState({completeSetup:!0})}},{key:"siteConnectedSetup",value:function(e){this.setState({isSiteKitConnected:e})}},{key:"siteVerificationSetup",value:function(e){this.setState({isVerified:e})}},{key:"searchConsoleSetup",value:function(e){this.setState({hasSearchConsoleProperty:e})}},{key:"isSetupFinished",value:function(){var e=this.state,t=e.isSiteKitConnected,a=e.isAuthenticated,i=e.isVerified,n=e.hasSearchConsoleProperty,r=e.completeSetup;return t&&a&&i&&n&&r}},{key:"setErrorMessage",value:function(e){this.setState({errorMsg:e})}},{key:"getApplicableSteps",value:function(){var e,t=J,a=Object.keys(t);for(e=0;e<a.length;e++)t[a[e]].isApplicable(this.state)||delete t[a[e]];return t}},{key:"currentStep",value:function(e){var t,a=Object.keys(e);for(t=0;t<a.length-1;t++)if(!e[a[t]].isCompleted(this.state))return a[t];return a[t]}},{key:"stepStatus",value:function(e,t){return e[t].isCompleted(this.state)?"completed":t===this.currentStep(e)?"inprogress":""}},{key:"render",value:function(){var e=this,t=this.state,a=t.canSetup,i=t.isAuthenticated,n=t.isVerified,r=t.needReauthenticate,s=t.hasSearchConsoleProperty,o=t.connectURL,c=t.isSiteKitConnected;if(this.isSetupFinished()){var l=Object(w.n)("googlesitekit-dashboard",{notification:"authentication_success"});Object(R.delay)((function(){window.location.replace(l)}),500,"later")}var u=this.getApplicableSteps(),d=this.currentStep(u),m=u[d].Component,g=React.createElement(m,{siteConnectedSetup:this.siteConnectedSetup,connectURL:o,siteVerificationSetup:this.siteVerificationSetup,searchConsoleSetup:this.searchConsoleSetup,completeSetup:this.completeSetup,isSiteKitConnected:c,isAuthenticated:i,isVerified:n,needReauthenticate:r,hasSearchConsoleProperty:s,setErrorMessage:this.setErrorMessage,resetAndRestart:u.clientCredentials?this.resetAndRestart:void 0}),p=a,h=!p&&!i;return React.createElement(v.Fragment,null,React.createElement(b.a,null),React.createElement("div",{className:"googlesitekit-wizard"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},React.createElement(C.a,null,React.createElement("section",{className:"googlesitekit-wizard-progress"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},p&&React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},React.createElement("div",{className:"googlesitekit-wizard-progress__steps"},Object.keys(u).map((function(t,a){return React.createElement($,{key:u[t].title,currentStep:d===t,title:u[t].title,step:a+1,status:e.stepStatus(u,t),warning:u[t].warning,error:u[t].error,stepKey:t})})))))),h&&React.createElement("div",{className:"googlesitekit-setup__footer"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},React.createElement("h1",{className:"googlesitekit-setup__title"},Object(y.__)("Authenticate Site Kit","google-site-kit")),React.createElement("p",{className:"googlesitekit-setup__description"},Object(y.__)("Please sign into your Google account to begin.","google-site-kit")),React.createElement(E.a,{href:"#",onClick:function(){Object(w.v)("plugin_setup","signin_with_google"),document.location=o}},Object(y.__)("Sign in with Google","google-site-kit"))))))),p&&g))))))}}]),t}(v.Component);t.default=ee},43:function(e,t,a){"use strict";a(1);var i=a(0),n=a(14);t.a=function(){var e=Object(i.__)("Need help?","google-site-kit");return React.createElement(n.a,{className:"googlesitekit-help-link",href:"https://sitekit.withgoogle.com/documentation/",external:!0},e)}},44:function(e,t,a){"use strict";var i=a(3),n=a.n(i),r=a(4),s=a.n(r),o=a(5),c=a.n(o),l=a(6),u=a.n(l),d=a(7),m=a.n(d),g=a(1),p=a(22),h=function(e){function t(){return n()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),s()(t,[{key:"render",value:function(){return null}}]),t}(g.Component),_=Object(p.a)("googlesitekit.ErrorNotification")(h),f=a(81),k=a(13),v=a.n(k),R=a(15),y=a.n(R),b=a(11),E=a.n(b),C=a(70),S=a(29),w=a(23),N=a(8),O=a.n(N),L=function(e){function t(e){var a;return n()(this,t),(a=c()(this,u()(t).call(this,e))).menuRef=Object(g.createRef)(),a}return m()(t,e),s()(t,[{key:"componentDidMount",value:function(){var e=this.props.menuOpen;this.menu=new w.f(this.menuRef.current),this.menu.open=e,this.menu.setDefaultFocusState(1)}},{key:"componentDidUpdate",value:function(e){var t=this.props.menuOpen;t!==e.menuOpen&&(this.menu.open=t)}},{key:"render",value:function(){var e=this.props,t=e.menuOpen,a=e.menuItems,i=e.onSelected,n=e.id;return React.createElement("div",{className:"mdc-menu mdc-menu-surface",ref:this.menuRef},React.createElement("ul",{id:n,className:"mdc-list",role:"menu","aria-hidden":!t,"aria-orientation":"vertical",tabIndex:"-1"},a.map((function(e,t){return React.createElement("li",{key:t,className:"mdc-list-item",role:"menuitem",onClick:i.bind(null,t),onKeyDown:i.bind(null,t)},React.createElement("span",{className:"mdc-list-item__text"},e))}))))}}]),t}(g.Component);L.propTypes={menuOpen:O.a.bool.isRequired,menuItems:O.a.array.isRequired,id:O.a.string.isRequired};var j=L,x=a(2),M=a(0),A=function(e){function t(e){var a;return n()(this,t),(a=c()(this,u()(t).call(this,e))).state={dialogActive:!1,menuOpen:!1},a.handleMenu=a.handleMenu.bind(E()(a)),a.handleMenuClose=a.handleMenuClose.bind(E()(a)),a.handleMenuItemSelect=a.handleMenuItemSelect.bind(E()(a)),a.handleDialog=a.handleDialog.bind(E()(a)),a.handleDialogClose=a.handleDialogClose.bind(E()(a)),a.handleUnlinkConfirm=a.handleUnlinkConfirm.bind(E()(a)),a.menuButtonRef=Object(g.createRef)(),a.menuRef=Object(g.createRef)(),a}var a;return m()(t,e),s()(t,[{key:"componentDidMount",value:function(){window.addEventListener("mouseup",this.handleMenuClose),window.addEventListener("keyup",this.handleMenuClose),window.addEventListener("keyup",this.handleDialogClose)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mouseup",this.handleMenuClose),window.removeEventListener("keyup",this.handleMenuClose),window.removeEventListener("keyup",this.handleDialogClose)}},{key:"handleMenu",value:function(){var e=this.state.menuOpen;this.setState({menuOpen:!e})}},{key:"handleMenuClose",value:function(e){("keyup"!==e.type||27!==e.keyCode)&&"mouseup"!==e.type||this.menuButtonRef.current.buttonRef.current.contains(e.target)||this.menuRef.current.menuRef.current.contains(e.target)||this.setState({menuOpen:!1})}},{key:"handleMenuItemSelect",value:function(e,t){var a=googlesitekit.admin.proxyPermissionsURL;if("keydown"===t.type&&(13===t.keyCode||32===t.keyCode)||"click"===t.type)switch(e){case 0:this.handleDialog();break;case 1:window.location.assign(a);break;default:this.handleMenu()}}},{key:"handleDialog",value:function(){this.setState((function(e){return{dialogActive:!e.dialogActive,menuOpen:!1}}))}},{key:"handleDialogClose",value:function(e){27===e.keyCode&&this.setState({dialogActive:!1,menuOpen:!1})}},{key:"handleUnlinkConfirm",value:(a=y()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({dialogActive:!1}),Object(x.d)(),document.location=Object(x.n)("googlesitekit-splash",{googlesitekit_context:"revoked"});case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=googlesitekit.admin,t=e.userData,a=t.email,i=void 0===a?"":a,n=t.picture,r=void 0===n?"":n,s=e.proxyPermissionsURL,o=this.state,c=o.dialogActive,l=o.menuOpen;return React.createElement(g.Fragment,null,React.createElement("div",{className:"googlesitekit-dropdown-menu mdc-menu-surface--anchor"},React.createElement(S.a,{ref:this.menuButtonRef,className:"googlesitekit-header__dropdown mdc-button--dropdown",text:!0,onClick:this.handleMenu,icon:r?React.createElement("i",{className:"mdc-button__icon","aria-hidden":"true"},React.createElement("img",{className:"mdc-button__icon--image",src:r,alt:Object(M.__)("User Avatar","google-site-kit")})):void 0,ariaHaspopup:"menu",ariaExpanded:l,ariaControls:"user-menu"},i),React.createElement(j,{ref:this.menuRef,menuOpen:l,menuItems:[Object(M.__)("Disconnect","google-site-kit")].concat(s?[Object(M.__)("Manage sites...","google-site-kit")]:[]),onSelected:this.handleMenuItemSelect,id:"user-menu"})),React.createElement(C.a,{dialogActive:c,handleConfirm:this.handleUnlinkConfirm,handleDialog:this.handleDialog,title:Object(M.__)("Disconnect","google-site-kit"),subtitle:Object(M.__)("Disconnecting Site Kit by Google will remove your access to all services. After disconnecting, you will need to re-authorize to restore service.","google-site-kit"),confirmButton:Object(M.__)("Disconnect","google-site-kit"),provides:[]}))}}]),t}(g.Component),U=function(e){function t(){return n()(this,t),c()(this,u()(t).apply(this,arguments))}return m()(t,e),s()(t,[{key:"render",value:function(){var e=googlesitekit.setup.isAuthenticated;return React.createElement(g.Fragment,null,React.createElement("header",{className:"googlesitekit-header"},React.createElement("section",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--align-middle mdc-layout-grid__cell--span-3-phone mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-6-desktop "},React.createElement(f.a,null)),React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--align-middle mdc-layout-grid__cell--align-right-phone mdc-layout-grid__cell--span-1-phone mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-6-desktop "},e&&React.createElement(A,null))))),React.createElement(_,null))}}]),t}(g.Component);t.a=U},70:function(e,t,a){"use strict";var i=a(3),n=a.n(i),r=a(4),s=a.n(r),o=a(5),c=a.n(o),l=a(6),u=a.n(l),d=a(7),m=a.n(d),g=a(1),p=a(8),h=a.n(p),_=a(29),f=a(14),k=a(23),v=a(145),R=a.n(v),y=a(0),b=function(e){function t(){var e;return n()(this,t),(e=c()(this,u()(t).call(this))).state={attributes:[Object(y.__)("Audience overview","google-site-kit"),Object(y.__)("Top pages","google-site-kit"),Object(y.__)("Top acquisition sources","google-site-kit"),Object(y.__)("AdSense & Analytics metrics for top pages","google-site-kit")]},e.dialogRef=Object(g.createRef)(),e}return m()(t,e),s()(t,[{key:"componentDidMount",value:function(){new k.d(this.dialogRef.current)}},{key:"render",value:function(){var e=this.props,t=e.dialogActive,a=e.handleDialog,i=e.title,n=e.provides,r=e.handleConfirm,s=e.subtitle,o=e.confirmButton,c=e.dependentModules;return React.createElement("div",{ref:this.dialogRef,className:"mdc-dialog ".concat(t?"mdc-dialog--open":""),role:"alertdialog","aria-modal":"true","aria-labelledby":"remove-module-dialog","aria-describedby":"remove-module-dialog-description","aria-hidden":t?"false":"true",tabIndex:"-1"},React.createElement("div",{className:"mdc-dialog__scrim"}," "),React.createElement(R.a,{active:t},React.createElement("div",null,React.createElement("div",{className:"mdc-dialog__container"},React.createElement("div",{className:"mdc-dialog__surface"},i&&React.createElement("h2",{id:"remove-module-dialog",className:"mdc-dialog__title"},i),s&&React.createElement("p",{className:"mdc-dialog__lead"},s),React.createElement("section",{id:"remove-module-dialog-description",className:"mdc-dialog__content"},React.createElement("ul",{className:"mdc-list mdc-list--underlined mdc-list--non-interactive"},n&&n.map((function(e){return React.createElement("li",{className:"mdc-list-item",key:e},React.createElement("span",{className:"mdc-list-item__text"},e))})))),c&&React.createElement("p",{className:"mdc-dialog__dependecies"},React.createElement("strong",null,Object(y.__)("Note: ","google-site-kit")),c),React.createElement("footer",{className:"mdc-dialog__actions"},React.createElement(_.a,{onClick:r,danger:!0},o||Object(y.__)("Disconnect","google-site-kit")),React.createElement(f.a,{className:"mdc-dialog__cancel-button",onClick:function(){return a()},inherit:!0},Object(y.__)("Cancel","google-site-kit"))))))))}}]),t}(g.Component);b.propTypes={dialogActive:h.a.bool,handleDialog:h.a.func,handleConfirm:h.a.func.isRequired,title:h.a.string,description:h.a.string,confirmButton:h.a.string},b.defaultProps={dialogActive:!1,handleDialog:null,title:null,description:null,confirmButton:null},t.a=b}}]);